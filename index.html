<!doctype html>
<html>
  <head>
    <title>Game Thing</title>
  </head>
  <body>
  <div id="nameGet">
   Enter your name : <input type="text" name="name" id="name">
    <button onclick="initGame()">GO</button>
  </div>
  </body>
  <script src="/socket.io/socket.io.js"></script>
  <script src="/js/hexi.js"></script>
  <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script>
    var socket = io();
    

  
  function mainLoop(){
  
    //ping();
  
  }

  
  //Dont need to load and files for now
  thingsToLoad = [];
  var g;
  //Syncs per sec
  SYNC_RATE = 10;
  
  var id;
  var name;
  
  function setup(){
  
    
    testMsg = g.text("Hello : " + name);
    g.stage.putCenter(testMsg)
    testMsg.setPivot(0.5,0.5);
   
    
    mainLevel = g.group();
    socket.emit('join',name);
    g.state = play;
    
  }
  
  function load(){

  
 
  }
 
  
  function play(){
      
        //This is the render Loop
  
  }
  
  function initGame(){
  
  name = $('#name').val();
  
  $("#nameGet").remove();
  
  g = hexi(512,512,setup);
  g.fps = 60;
  g.scaleToWindow();
  g.backgroundColor = 0xFFFFFF;
  g.start();
  
  }
  
   
  socket.on('join',function(data){
       //Server will give us an ID untill we wait
       id = data.id;
       console.log("Got join data : " + id);
	   console.log("Movement Map! :" + JSON.stringify(data.test, null, 4));
	   
  });
  
  
  socket.on('disconnected', function() {

        socket.emit('leave', id);

  });
  
    </script>
</html>